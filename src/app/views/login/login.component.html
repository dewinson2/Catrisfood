<section class="min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 flex items-center justify-center py-8 px-4">
  <div class="w-full max-w-md">

    <!-- Logo / Header -->
    <div class="text-center mb-8">
      <h1 class="text-4xl font-bold text-white font-satisfy mb-2">CatrisFood</h1>
      <div class="flex justify-center mt-3">
        <div class="h-1 w-12 bg-[#E94E1B] rounded-full mx-1"></div>
        <div class="h-1 w-12 bg-[#D81B60] rounded-full mx-1"></div>
        <div class="h-1 w-12 bg-[#4CAF50] rounded-full mx-1"></div>
      </div>
      <p class="text-white/60 mt-4">Acceso al panel de administración</p>
    </div>

    <!-- Message Toast -->
    @if (message(); as msg) {
      <div class="mb-4 animate-slide-in">
        <div [class]="msg.type === 'success'
          ? 'bg-green-500/90 border-green-400'
          : 'bg-red-500/90 border-red-400'"
          class="backdrop-blur-sm text-white px-5 py-3 rounded-xl shadow-2xl border flex items-center gap-3">
          <span class="text-lg">{{ msg.type === 'success' ? '✅' : '❌' }}</span>
          <span class="font-medium text-sm">{{ msg.text }}</span>
        </div>
      </div>
    }

    <!-- Card -->
    <div class="bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-8 shadow-2xl">

      <!-- Tabs -->
      <div class="flex mb-6">
        <div class="bg-black/50 backdrop-blur-sm rounded-full p-1 border border-white/10 flex w-full">
          <button (click)="setTab('login')"
            [class]="activeTab() === 'login'
              ? 'bg-[#E94E1B] text-white shadow-lg'
              : 'text-white/60 hover:text-white'"
            class="flex-1 px-6 py-2.5 rounded-full font-medium transition-all duration-300 text-sm">
            Iniciar Sesión
          </button>
          <button (click)="setTab('register')"
            [class]="activeTab() === 'register'
              ? 'bg-[#D81B60] text-white shadow-lg'
              : 'text-white/60 hover:text-white'"
            class="flex-1 px-6 py-2.5 rounded-full font-medium transition-all duration-300 text-sm">
            Registrarse
          </button>
        </div>
      </div>

      <!-- Login Form -->
      @if (activeTab() === 'login') {
        <form [formGroup]="loginForm" (ngSubmit)="onLogin()" class="space-y-5">
          <!-- Email -->
          <div>
            <label class="block text-white/80 text-sm font-medium mb-2">Email</label>
            <input type="email" formControlName="email"
              class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30
                     focus:border-[#E94E1B] focus:outline-none transition-all duration-300"
              placeholder="tu@email.com">
            @if (getFieldError(loginForm, 'email'); as error) {
              <p class="text-red-400 text-xs mt-1">{{ error }}</p>
            }
          </div>

          <!-- Password -->
          <div>
            <label class="block text-white/80 text-sm font-medium mb-2">Contraseña</label>
            <input type="password" formControlName="password"
              class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30
                     focus:border-[#E94E1B] focus:outline-none transition-all duration-300"
              placeholder="••••••••">
            @if (getFieldError(loginForm, 'password'); as error) {
              <p class="text-red-400 text-xs mt-1">{{ error }}</p>
            }
          </div>

          <!-- Submit -->
          <button type="submit" [disabled]="loading()"
            class="w-full py-3 bg-gradient-to-r from-[#E94E1B] to-[#D81B60] text-white font-semibold rounded-xl
                   hover:shadow-lg hover:shadow-[#E94E1B]/25 transition-all duration-300
                   disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2">
            @if (loading()) {
              <svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
              </svg>
              Iniciando...
            } @else {
              Iniciar Sesión
            }
          </button>
        </form>
      }

      <!-- Register Form -->
      @if (activeTab() === 'register') {
        <form [formGroup]="registerForm" (ngSubmit)="onRegister()" class="space-y-5">
          <!-- Username -->
          <div>
            <label class="block text-white/80 text-sm font-medium mb-2">Nombre de usuario</label>
            <input type="text" formControlName="username"
              class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30
                     focus:border-[#D81B60] focus:outline-none transition-all duration-300"
              placeholder="Tu nombre">
            @if (getFieldError(registerForm, 'username'); as error) {
              <p class="text-red-400 text-xs mt-1">{{ error }}</p>
            }
          </div>

          <!-- Email -->
          <div>
            <label class="block text-white/80 text-sm font-medium mb-2">Email</label>
            <input type="email" formControlName="email"
              class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30
                     focus:border-[#D81B60] focus:outline-none transition-all duration-300"
              placeholder="tu@email.com">
            @if (getFieldError(registerForm, 'email'); as error) {
              <p class="text-red-400 text-xs mt-1">{{ error }}</p>
            }
          </div>

          <!-- Password -->
          <div>
            <label class="block text-white/80 text-sm font-medium mb-2">Contraseña</label>
            <input type="password" formControlName="password"
              class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30
                     focus:border-[#D81B60] focus:outline-none transition-all duration-300"
              placeholder="••••••••">
            @if (getFieldError(registerForm, 'password'); as error) {
              <p class="text-red-400 text-xs mt-1">{{ error }}</p>
            }
          </div>

          <!-- Confirm Password -->
          <div>
            <label class="block text-white/80 text-sm font-medium mb-2">Confirmar contraseña</label>
            <input type="password" formControlName="confirmPassword"
              class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30
                     focus:border-[#D81B60] focus:outline-none transition-all duration-300"
              placeholder="••••••••">
            @if (getFieldError(registerForm, 'confirmPassword'); as error) {
              <p class="text-red-400 text-xs mt-1">{{ error }}</p>
            }
          </div>

          <!-- Submit -->
          <button type="submit" [disabled]="loading()"
            class="w-full py-3 bg-gradient-to-r from-[#D81B60] to-[#E94E1B] text-white font-semibold rounded-xl
                   hover:shadow-lg hover:shadow-[#D81B60]/25 transition-all duration-300
                   disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2">
            @if (loading()) {
              <svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
              </svg>
              Registrando...
            } @else {
              Crear Cuenta
            }
          </button>
        </form>
      }

      <!-- Back link -->
      <div class="text-center mt-6">
        <a routerLink="/" class="text-white/40 hover:text-white/70 text-sm transition-colors duration-300">
          ← Volver al inicio
        </a>
      </div>
    </div>
  </div>
</section>
